-- ADRESLER Tablosu
CREATE TABLE ADRESLER (
    AdresNo INT PRIMARY KEY AUTO_INCREMENT,
    Sehir VARCHAR(50),
    Mahalle VARCHAR(50),
    BinaNo VARCHAR(10),
    PostaKodu VARCHAR(10),
    Ulke VARCHAR(50),
    Cadde VARCHAR(100)
);

-- ÜYELER Tablosu
CREATE TABLE UYELER (
    UyeNo INT PRIMARY KEY AUTO_INCREMENT,
    UyeAdi VARCHAR(50) NOT NULL,
    UyeSoyadi VARCHAR(50) NOT NULL,
    Cinsiyet CHAR(1) CHECK (Cinsiyet IN ('E', 'K')),
    Telefon VARCHAR(15),
    Eposta VARCHAR(100),
    AdresNo INT,
    FOREIGN KEY (AdresNo) REFERENCES ADRESLER(AdresNo)
);

-- KÜTÜPHANE Tablosu
CREATE TABLE KUTUPHANE (
    KutuphaneNo INT PRIMARY KEY AUTO_INCREMENT,
    KutuphaneIsmi VARCHAR(100) NOT NULL,
    Aciklama TEXT,
    AdresNo INT,
    FOREIGN KEY (AdresNo) REFERENCES ADRESLER(AdresNo)
);

-- KITAPLAR Tablosu
CREATE TABLE KITAPLAR (
    ISBN VARCHAR(20) PRIMARY KEY,
    KitapAdi VARCHAR(255) NOT NULL,
    SayfaSayisi INT,
    YayinTarihi DATE
);

-- KATEGORİLER Tablosu
CREATE TABLE KATEGORILER (
    KategoriNo INT PRIMARY KEY AUTO_INCREMENT,
    KategoriAdi VARCHAR(100) NOT NULL
);

-- YAZARLAR Tablosu
CREATE TABLE YAZARLAR (
    YazarNo INT PRIMARY KEY AUTO_INCREMENT,
    YazarAdi VARCHAR(50) NOT NULL,
    YazarSoyadi VARCHAR(50) NOT NULL
);

-- EMANET Tablosu
CREATE TABLE EMANET (
    EmanetNo INT PRIMARY KEY AUTO_INCREMENT,
    UyeNo INT,
    ISBN VARCHAR(20),
    EmanetTarihi DATE NOT NULL,
    TeslimTarihi DATE,
    FOREIGN KEY (UyeNo) REFERENCES UYELER(UyeNo),
    FOREIGN KEY (ISBN) REFERENCES KITAPLAR(ISBN)
);

-- KITAP_KATEGORI Tablosu (m:n ilişki)
CREATE TABLE KITAP_KATEGORI (
    ISBN VARCHAR(20),
    KategoriNo INT,
    PRIMARY KEY (ISBN, KategoriNo),
    FOREIGN KEY (ISBN) REFERENCES KITAPLAR(ISBN),
    FOREIGN KEY (KategoriNo) REFERENCES KATEGORILER(KategoriNo)
);

-- KITAP_YAZAR Tablosu (m:n ilişki)
CREATE TABLE KITAP_YAZAR (
    ISBN VARCHAR(20),
    YazarNo INT,
    PRIMARY KEY (ISBN, YazarNo),
    FOREIGN KEY (ISBN) REFERENCES KITAPLAR(ISBN),
    FOREIGN KEY (YazarNo) REFERENCES YAZARLAR(YazarNo)
);

-- KUTUPHANE_KITAPLAR Tablosu (1:m ilişki)
CREATE TABLE KUTUPHANE_KITAPLAR (
    KutuphaneNo INT,
    ISBN VARCHAR(20),
    Miktar INT CHECK (Miktar >= 0),
    PRIMARY KEY (KutuphaneNo, ISBN),
    FOREIGN KEY (KutuphaneNo) REFERENCES KUTUPHANE(KutuphaneNo),
    FOREIGN KEY (ISBN) REFERENCES KITAPLAR(ISBN)
);
